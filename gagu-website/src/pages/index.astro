---
import Block from '../components/Block.astro'
import Layout from '../layouts/Layout.astro'
import iconNPM from '../img/icons/npm.svg'
import iconDownload from '../img/icons/download.svg'
import iconCopy from '../img/icons/copy.svg'
import iconSound from '../img/icons/sound.svg'
import iconFeatureWeb from '../img/icons/feature-web.svg'
import iconFeaturePlatform from '../img/icons/feature-platform.svg'
import iconFeatureUsers from '../img/icons/feature-users.svg'
import iconFeatureLang from '../img/icons/feature-lang.svg'
import iconFeatureShare from '../img/icons/feature-share.svg'
import iconFeatureOpen from '../img/icons/feature-open.svg'
import iconFeatureLight from '../img/icons/feature-light.svg'
import iconAppFileExplorer from '../img/icons/app-file-explorer.svg'
import iconAppTextEditor from '../img/icons/app-text-editor.svg'
import iconAppPhotoViewer from '../img/icons/app-photo-viewer.svg'
import iconAppMusicPlayer from '../img/icons/app-music-player.svg'
import iconAppVideoPlayer from '../img/icons/app-video-player.svg'
import iconAppSettings from '../img/icons/app-settings.svg'
import '../css/index.css'

const featureList = [
  { icon: iconFeatureWeb, title: 'Web-based', desc: 'Use in PC or Mobile browser' },
  { icon: iconFeaturePlatform, title: 'Multi-platform', desc: 'Where server-side works' },
  { icon: iconFeatureUsers, title: 'Multi-user', desc: 'Access and permission control' },
  { icon: iconFeatureLang, title: 'Multi-lang', desc: 'Supports multiple languages' },
  { icon: iconFeatureShare, title: 'File Share', desc: 'Generate file download link with token' },
  { icon: iconFeatureLight, title: 'Lightweight', desc: 'NPM package size is less then 1MB' },
  { icon: iconFeatureOpen, title: 'Open Source', desc: 'All code is on GitHub' },
]

const appList = [
  { icon: iconAppFileExplorer, title: 'File Explorer', desc: 'Core management' },
  { icon: iconAppTextEditor, title: 'Text Editor', desc: 'Text / Markdown / Code preview' },
  { icon: iconAppPhotoViewer, title: 'Photo Viewer', desc: 'JPG / PNG / GIF / SVG' },
  { icon: iconAppMusicPlayer, title: 'Music Player', desc: 'MP3 / FLAC' },
  { icon: iconAppVideoPlayer, title: 'Video Player', desc: 'MP4 / MKV' },
  { icon: iconAppSettings, title: 'Settings', desc: 'System setting / Users management / Log' },
]

const codeList = [
  { title: 'Install with NPM', code: 'npm i -g gagu' },
  { title: 'Start service', code: 'gagu' },
  { title: 'Show help info', code: 'gagu -h' },
]
---

<Layout title="GAGU - A web-based file management system">

  <Block className="bg-gradient-to-b from-gray-400 to-gray-900">
    <div class="py-24 xl:py-0 h-auto md:h-100vh flex flex-wrap items-start md:items-center">
      <div class="w-full lg:w-1/2 flex justify-center lg:justify-start items-center">
        <div class="text-center lg:text-left text-white">
          <div
            class="group cursor-pointer"
            onclick="document.querySelector('#audio').currentTime = 0;document.querySelector('#audio').play();"
          >
            <span class="opacity-60 text-xs md:text-base flex justify-center lg:justify-start items-center">
              <span>/'gʌgu/</span>
              <img src={iconSound} class="md:hidden group-hover:block ml-2 w-4 h-4" />
            </span>
            <p class="mt-2 md:mt-1 text-5xl lg:text-7xl font-bold">GAGU (Beta)</p>
          </div>
          <p class="mt-3 text-xl md:text-3xl opacity-60">A web-based file management system</p>
          <p class="mt-2 text-sm md:text-lg opacity-60">Manage your different device files in browser.</p>
          <p class="text-sm md:text-lg opacity-60">Works on Windows, macOS, Linux and Termux(Android).</p>
          <div class="mt-12 flex justify-center lg:justify-start">
            <a
              onclick="jumpTo('npm')"
              class="mr-4 px-4 md:px-6 h-10 text-xs md:text-sm bg-gray-100 text-gray-600
                flex justify-center items-center rounded-full cursor-pointer shadow-lg select-none
                hover:opacity-80 transition-opacity duration-200"
            >
              <img src={iconNPM} class="w-6 h-6" />
              <span class="ml-1 md:ml-2">NPM Install</span>
            </a>
            <a
              onclick="jumpTo('download')"
              class="px-4 md:px-6 h-10 text-xs md:text-sm bg-gray-100 text-gray-600
                flex justify-center items-center rounded-full cursor-pointer shadow-lg select-none
                hover:opacity-80 transition-opacity duration-200"
            >
              <img src={iconDownload} class="w-6 h-6" />
              <span class="ml-1 md:ml-2">Download</span>
            </a>
          </div>
          <p class="mt-4 text-xs opacity-60">Version: {import.meta.env.PUBLIC_VERSION}(Beta)</p>
        </div>
      </div>
      <div class="mt-12 lg:mt-0 w-full lg:w-1/2">
        <img
          alt="developing"
          src="https://jisuowei.com/file/gagu.png"
          class="w-full h-full max-w-full max-h-full"
        />
      </div>
    </div>
  </Block>

  <Block className="py-16 bg-gray-900">
    <div class="py-16 rounded-3xl bg-gradient-to-b from-blue-500 to-blue-900">
      <h2 class="text-2xl md:text-4xl text-center font-bold text-blue-100">Features</h2>
      <p class="mt-4 text-sm md:text-base lg:text-lg text-center text-blue-300">
        Mainly for individuals,<br class="md:hidden" /> families or small teams to use in LAN
      </p>
      <div class="mt-12 flex flex-wrap justify-center">
        {featureList.map(({ icon, title, desc }) => (
          <div class="py-8 w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/5 text-center">
            <div
              class="mx-auto w-16 md:w-24 h-16 md:h-24 bg-center bg-no-repeat bg-cover opacity-80"
              style={`background-image: url("${icon}");`}
            />
            <p class="mt-6 text-blue-100">{title}</p>  
            <p class="mt-1 md:mt-2 px-2 text-xs text-blue-300">{desc}</p>  
          </div>
        ))}
      </div>
    </div>
  </Block>

  <Block className="bg-gradient-to-b from-gray-900 to-gray-600">
    <div class="py-16 md:py-32">
      <h2 class="text-2xl md:text-4xl text-center font-bold text-gray-100">Apps</h2>
      <p class="mt-4 text-sm md:text-base lg:text-lg text-center text-gray-300">
        GAGU provides some basic applications
      </p>
      <div class="mt-12 flex flex-wrap select-none">
        {appList.map(({ icon, title, desc }) => (
          <div class="px-8 md:px-12 py-4 md:py-8 lg:py-12 w-full md:w-1/2 lg:w-1/3 xl:w-1/4 rounded-2xl flex justify-start cursor-pointer hover:bg-gray-600">
            <div
              class="flex-shrink-0 w-12 md:w-20 h-12 md:h-20 rounded-lg md:rounded-2xl bg-center bg-no-repeat bg-cover shadow-lg"
              style={`background-image: url("${icon}");`}
            >
            </div>
            <div class="ml-4">
              <p class="text-base md:text-lg font-bold text-gray-100">{title}</p>  
              <p class="mt-1 text-xs md:text-sm text-gray-400">{desc}</p>  
            </div>
          </div>
        ))}
      </div>
    </div>
  </Block>

  <Block className="bg-gradient-to-b from-gray-600 to-gray-500">
    <div class="py-16 md:py-32 flex flex-wrap justify-center bg-gray-200 rounded-t-2xl">
      <div id="npm" class="w-full lg:w-1/2 px-0 md:px-12 lg:px-24">
        <h2 class="text-2xl md:text-4xl text-center font-bold">NPM Install</h2>
        <p class="mt-4 text-sm md:text-base lg:text-lg text-center text-gray-500">
          Windows · macOS · Linux · Termux
        </p>
        <div class="mt-12 px-4 md:px-0">
          {codeList.map(({ title, code }) => (
            <div class="mb-4">
              <p class="text-gray-500 text-sm">{title}:</p>
              <code class="relative block mt-2 px-4 py-2 rounded-md bg-gray-300 text-gray-700 before:content-['$'] group">
                {code}
                <div
                  class="md:hidden group-hover:flex
                    absolute top-0 right-0 bottom-0 w-12
                    flex justify-center items-center cursor-pointer active:opacity-30 group"
                  onclick={`copy('${code}')`}
                >
                  <img src={iconCopy} class="w-4 h-4" />
                </div>
              </code>
            </div>
          ))}
        </div>
      </div>
      <div id="download" class="mt-24 lg:mt-0 w-full lg:w-1/2">
        <h2 class="text-2xl md:text-4xl text-center font-bold">Download</h2>
        <p class="mt-4 text-sm md:text-base lg:text-lg text-center text-gray-500">
          Windows · macOS · Linux
        </p>
        <div class="mt-16 md:mt-24 text-center">
          <p>Stable package built via Vercel/pkg,</p>
          <p>will be available after v1.0.0 released.</p>
          <p class="block mt-8 text-xs text-gray-500">Build beta package by yourself with</p>
          <code class="block mt-1 text-xs text-gray-500">`npm run build:bin && npm run pkg`</code>
          <p class="block mt-1 text-xs text-gray-500">in local development.</p>
        </div>
      </div>
    </div>
  </Block>

  <div class="w-0 h-0 overflow-hidden">
    <audio id="audio" preload="preload" src="/gagu.mp3" />
  </div>

</Layout>
<script is:inline>
const copy = (str) => {
  const input = document.createElement('textarea')
  document.body.appendChild(input)
  input.value = str
  input.select()
  document.execCommand('Copy')
  document.body.removeChild(input)
}

const jumpTo = (id) => {
  const top = document.getElementById(id).getBoundingClientRect().top - 40
  window.scrollTo({ top, behavior: 'smooth' })
}
</script>
